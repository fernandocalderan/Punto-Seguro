<!DOCTYPE html>
<html lang="es">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-4665672QWS"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);} // eslint-disable-line no-unused-vars
    gtag('js', new Date());
    gtag('config', 'G-4665672QWS');
  </script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Punto Seguro | Solicitar propuestas</title>
  <meta name="description" content="Solicita propuestas adaptadas en Punto Seguro. Compartimos tus datos con hasta 2 proveedores." />

  <!-- Favicon -->
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles/leads.css" />
  <link rel="stylesheet" href="/css/ps-ui.css?v=1" />

  <style>
    /* Make optional details summary look like a subtle button */
    details.optional-details > summary.ps-details-cta{
      list-style: none;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: .55rem;
      padding: .55rem .8rem;
      border-radius: 12px;
      border: 1px solid rgba(15,23,42,0.10);
      background: rgba(15,23,42,0.03);
      user-select: none;
      font-weight: 600;
      letter-spacing: .2px;
    }
    details.optional-details > summary.ps-details-cta::-webkit-details-marker{ display:none; }
    details.optional-details > summary.ps-details-cta::after{
      content: "▾";
      opacity: .85;
      transform: translateY(-1px);
      transition: transform .15s ease;
    }
    details.optional-details[open] > summary.ps-details-cta::after{
      transform: rotate(180deg);
    }
    details.optional-details > summary.ps-details-cta:hover{
      background: rgba(43,92,255,0.06);
      border-color: rgba(43,92,255,0.18);
    }
    details.optional-details > summary.ps-details-cta:focus{
      outline: 2px solid rgba(43,92,255,0.22);
      outline-offset: 2px;
    }

    #ps-otp-overlay[aria-hidden="true"]{
      display: none;
    }

    #ps-otp-overlay{
      position: fixed;
      inset: 0;
      z-index: 1200;
      background: rgba(15,23,42,0.55);
      display: grid;
      place-items: center;
      padding: 1rem;
    }

    .ps-otp-modal{
      width: min(460px, 100%);
      background: #ffffff;
      border: 1px solid rgba(15,23,42,0.12);
      border-radius: 18px;
      box-shadow: 0 24px 60px rgba(15,23,42,0.22);
      padding: 1rem 1rem 1.1rem;
      display: grid;
      gap: .8rem;
    }

    .ps-otp-head{
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: .7rem;
    }

    .ps-otp-head h3{
      margin: 0;
      color: var(--brand-secondary);
      font-size: 1.1rem;
      letter-spacing: -.01em;
    }

    #ps-otp-close{
      border: 1px solid rgba(15,23,42,0.14);
      background: #fff;
      border-radius: 10px;
      width: 34px;
      height: 34px;
      cursor: pointer;
      font-size: 1.05rem;
      line-height: 1;
      color: rgba(15,23,42,.75);
    }

    .ps-otp-copy{
      margin: 0;
      color: rgba(15,23,42,.72);
      font-size: .92rem;
      line-height: 1.4;
    }

    #ps-otp-code{
      height: 48px;
      border-radius: 12px;
      border: 1px solid rgba(15,23,42,.16);
      padding: 0 .8rem;
      font-size: 1.15rem;
      font-weight: 700;
      letter-spacing: .18em;
      text-align: center;
    }

    #ps-otp-code:focus{
      outline: none;
      border-color: rgba(43,92,255,.45);
      box-shadow: 0 0 0 4px rgba(43,92,255,.12);
    }

    .ps-otp-actions{
      display: flex;
      flex-wrap: wrap;
      gap: .65rem;
    }

    #ps-otp-confirm,
    #ps-otp-resend{
      min-height: 42px;
      border-radius: 999px;
      border: 1px solid transparent;
      padding: .62rem .95rem;
      font-weight: 800;
      font-size: .92rem;
      cursor: pointer;
    }

    #ps-otp-confirm{
      background: var(--brand-primary);
      color: #fff;
    }

    #ps-otp-resend{
      background: #fff;
      border-color: rgba(15,23,42,.16);
      color: rgba(15,23,42,.84);
    }

    #ps-otp-confirm:disabled,
    #ps-otp-resend:disabled{
      opacity: .6;
      cursor: not-allowed;
    }

    #ps-otp-error{
      display: none;
      margin: 0;
      color: #b91c1c;
      font-weight: 600;
      font-size: .9rem;
    }

    #ps-otp-status{
      min-height: 1.2rem;
      margin: 0;
      color: rgba(15,23,42,.65);
      font-size: .88rem;
    }

    @media (max-width: 520px){
      .ps-otp-modal{
        border-radius: 14px;
        padding: .95rem;
      }
      #ps-otp-code{
        font-size: 1.05rem;
        letter-spacing: .12em;
      }
    }
  </style>
</head>
<body class="ps-mode-inflow">
  <header class="header">
    <div class="container header-inner">
      <a class="brand ps-brand" href="/" aria-label="Volver a inicio">
        <div class="logo">
          <img class="ps-logo" src="/logo-punto-seguro.png" alt="Punto Seguro">
        </div>
        <div class="brand-text">
          <strong class="ps-brand-title">Punto Seguro</strong>
          <span class="ps-brand-subtitle">Evaluación IEI™ neutral</span>
        </div>
        <div class="brand-text-mobile">
          <strong class="ps-brand-title">Punto Seguro</strong>
        </div>
      </a>
      <div class="ps-header-cta-wrap">
        <a class="ps-cta-primary ps-header-cta" href="/diagnostico" data-ps-placement="header" aria-label="Calcular mi Índice IEI™">Calcular mi Índice IEI™</a>
        <div class="ps-trustline">Sin llamadas. Solo compartimos datos si tú lo decides (hasta 2 proveedores).</div>
      </div>
    </div>
  </header>

  <main class="main">
    <div class="container stack">
      <section class="card stack">
        <h1>Solicitar propuestas adaptadas</h1>
        <p class="lead">Punto Seguro actúa como canal neutral y comparte tu solicitud con hasta 2 proveedores activos para tu zona.</p>

        <div id="lead-summary" class="notice">
          Cargando prioridad recomendada, plazo y motivos de tu evaluación IEI™...
        </div>

        <form id="lead-form" class="stack" novalidate>
          <h2 class="subsection-title">Datos mínimos</h2>
          <div class="grid">
            <div class="field">
              <label for="name">Nombre y apellidos</label>
              <input id="name" name="name" autocomplete="name" required />
            </div>
            <div class="field">
              <label for="phone">Teléfono</label>
              <input id="phone" name="phone" autocomplete="tel" required />
            </div>
            <div class="field">
              <label for="email">Email</label>
              <input id="email" name="email" type="email" autocomplete="email" required />
            </div>
            <div class="field">
              <label for="postal_code">Código postal</label>
              <input id="postal_code" name="postal_code" autocomplete="postal-code" required />
            </div>
          </div>

          <details class="optional-details">
            <summary class="ps-details-cta" role="button" aria-label="Añadir detalles opcionales">
              Añadir detalles (opcional)
            </summary>
            <div class="optional-details-body stack">
              <div class="grid">
                <div class="field">
                  <label for="city">Ciudad (opcional)</label>
                  <input id="city" name="city" autocomplete="address-level2" />
                </div>
                <div class="field">
                  <label for="business_type">Tipo de inmueble (opcional)</label>
                  <select id="business_type" name="business_type">
                    <option value="">Selecciona</option>
                    <option value="vivienda">Vivienda</option>
                    <option value="comercio">Comercio</option>
                    <option value="oficina">Oficina</option>
                    <option value="otro">Otro</option>
                  </select>
                </div>
                <div class="field">
                  <label for="urgency">Urgencia (opcional)</label>
                  <select id="urgency" name="urgency">
                    <option value="baja">Baja</option>
                    <option value="media" selected>Media</option>
                    <option value="alta">Alta</option>
                  </select>
                </div>
                <div class="field">
                  <label for="budget_range">Presupuesto estimado (opcional)</label>
                  <select id="budget_range" name="budget_range">
                    <option value="sin_definir">Sin definir</option>
                    <option value="hasta_500">Hasta 500 EUR</option>
                    <option value="500_1500">500 a 1.500 EUR</option>
                    <option value="1500_3000">1.500 a 3.000 EUR</option>
                    <option value="mas_3000">Más de 3.000 EUR</option>
                  </select>
                </div>
              </div>

              <div class="field">
                <label for="notes">Notas adicionales (opcional)</label>
                <textarea id="notes" name="notes" placeholder="Horario de contacto, detalles útiles del inmueble, etc."></textarea>
              </div>
            </div>
          </details>

          <label class="field" style="display:flex;gap:0.65rem;align-items:flex-start;">
            <input id="consent" type="checkbox" style="margin-top:0.18rem;min-height:auto;width:auto;" required />
            <span>
              Acepto que Punto Seguro comparta mis datos con hasta 2 proveedores para recibir propuestas.
              He leído <a href="/privacidad" target="_blank" rel="noopener">Privacidad</a>,
              <a href="/terminos" target="_blank" rel="noopener">Términos</a> y
              <a href="/cookies" target="_blank" rel="noopener">Cookies</a>.
            </span>
          </label>

          <div id="form-alert" class="notice" style="display:none;"></div>

          <div class="actions">
            <button type="submit" class="btn btn-primary">Enviar solicitud</button>
          </div>
          <p class="cta-primary-note">Tardarás menos de 30 segundos.</p>
        </form>
      </section>
    </div>
  </main>

  <footer class="footer">
    © 2026 <b>Punto Seguro</b> · Transparencia: cesión de datos limitada a hasta 2 proveedores.
    <div class="ps-model-block" aria-label="Modelo IEI">
      <div class="ps-model-title" id="ps-iei-title"></div>
      <div class="ps-model-desc" id="ps-iei-desc"></div>
    </div>
  </footer>

  <div id="ps-otp-overlay" aria-hidden="true">
    <div class="ps-otp-modal" role="dialog" aria-modal="true" aria-labelledby="ps-otp-title">
      <div class="ps-otp-head">
        <h3 id="ps-otp-title">Verificación por SMS</h3>
        <button type="button" id="ps-otp-close" aria-label="Cerrar">×</button>
      </div>
      <p class="ps-otp-copy">Introduce el código de 6 dígitos que acabamos de enviar a tu teléfono.</p>
      <input
        id="ps-otp-code"
        type="text"
        maxlength="6"
        inputmode="numeric"
        pattern="[0-9]*"
        autocomplete="one-time-code"
        placeholder="------"
        aria-label="Código OTP de 6 dígitos"
      />
      <p id="ps-otp-error"></p>
      <p id="ps-otp-status"></p>
      <div class="ps-otp-actions">
        <button type="button" id="ps-otp-confirm">Confirmar</button>
        <button type="button" id="ps-otp-resend">Reenviar</button>
      </div>
    </div>
  </div>

  <script src="/js/analytics.js"></script>
  <script src="js/lead-form.js"></script>
  <script src="/js/ps-cta.js"></script>
  <script src="/js/iei-meta.js"></script>
  <script src="/js/iei-ui.js"></script>
</body>
</html>
